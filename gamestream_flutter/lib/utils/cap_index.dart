int capIndex(List<int> values, int index) =>
    index < values.length ? values[index] : values.last;
